<div class="main">
  <div class="top-section">
    <div class="container w-75 pt-5">
      <div class="row justify-content-between">
        <div class="col text-white fw-medium">Task</div>
        <div class="col search-box">
          <div class="search-container">
            <img src="/assets/icons/search.svg" />
            <input
              class="custom-input-seacrh"
              type="text"
              placeholder="Search"
            />
          </div>
        </div>
        <div class="col text-white user-info">
          <div class="d-flex align-items-center">
            <img class="me-3" src="/assets/images/avatar.png" />
            <span class="fw-medium">Mahmoud Ahmed</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="tasks-container container w-75 p-5 bg-white shadow-lg">
    <div
      class="top-part d-flex justify-content-between align-items-center mb-5"
    >
      <div
        class="filter-section d-flex justify-content-start align-items-center gap-4"
      >
        <p
          class="fw-medium cursor-pointer"
          *ngFor="let status of task_status_filter"
          [ngClass]="
            selected_status === status ? 'active-item' : 'inactive-item'
          "
          (click)="handle_status_selection(status)"
        >
          {{ status }}
        </p>
      </div>
      <button id="add-btn" (click)="open_add_dilog()">Add Task</button>
    </div>
    <p-table
      [value]="filtered_tasks"
      [(selection)]="selectedTasks"
      dataKey="id"
      selectionMode="multiple"
      [tableStyle]="{ 'min-width': '50rem' }"
    >
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 4rem"><p-tableHeaderCheckbox /></th>
          <th *ngFor="let column of columns">{{ column.header }}</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-task>
        <tr>
          <td>
            <p-tableCheckbox [value]="task" />
          </td>
          <td>{{ task.task_topic }}</td>
          <td>{{ task.status }}</td>
          <td>
            <p
              class="priority-text"
              [ngClass]="get_priorty_class(task.priority)"
            >
              {{ task.priority }}
            </p>
          </td>
          <td>{{ task.created | date : "MM/dd/yyyy" }}</td>
          <td>{{ task.end_date | date : "MM/dd/yyyy" }}</td>
          <td class="d-flex align-items-center justify-content-between">
            <img
              class="cursor-pointer"
              (click)="open_apdate_dilog(task)"
              src="/assets/icons/edit.svg"
            />
            
            <img *ngIf="task.status === 'Pending'" class="cursor-pointer" src="/assets/icons/check.svg" />
            <img *ngIf="task.status === 'Completed'" src="/assets/icons/check-green.svg" />
            <img
              class="cursor-pointer"
              (click)="open_confirm_delete_dialog()"
              src="/assets/icons/delete.svg"
            />
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <!-- app.component.html -->
  <app-add-dialog (task_added)="add_task($event)"></app-add-dialog>
  <app-update-dialog (task_updated)="update_task($event)"></app-update-dialog>
  <app-confirm-delete-dialog></app-confirm-delete-dialog>
</div>
